<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html lang="en">
<head>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
        <title>Apache Sling :: Examples</title>
        <link rel="icon" href="/ng/res/favicon.ico"/>
        <link rel="stylesheet" href="/ng/res/css/site.css"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/>
        <script src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js'></script><script>
            hljs.initHighlightingOnLoad();
        </script>
        
    </head>    <body>
<div class="title">
            <div class="logo">
                <a href="http://sling.apache.org">
                    <img border="0" alt="Apache Sling" src="/ng/res/logos/sling.svg"/>
                </a>
            </div><div class="header">
                <a href="http://www.apache.org">
                    <img border="0" alt="Apache" src="/ng/res/logos/apache.png"/>
                </a>
            </div>
        </div><h1 class="draft">DRAFT 2017 WEBSITE - SLING-6955</h1><div class="menu">
            <p>
                <strong><a href="/ng/documentation.html">Documentation</a></strong><br/>
                <a href="/ng/documentation/getting-started.html">Getting Started</a><br/>
                <a href="/ng/documentation/the-sling-engine.html">The Sling Engine</a><br/>
                <a href="/ng/documentation/development.html">Development</a><br/>
                <a href="/ng/documentation/bundles.html">Bundles</a><br/>
                <a href="/ng/documentation/tutorials-how-tos.html">Tutorials &amp; How-Tos</a><br/>
                <a href="/ng/documentation/configuration.html">Configuration</a>
            </p><p>
                <a href="http://s.apache.org/sling.wiki">Wiki</a><br/>
                <a href="http://s.apache.org/sling.faq">FAQ</a><br/>
                
            </p><p>
                <strong>API Docs</strong><br/>
                <a href="/ng/apidocs/sling9/index.html">Sling 9</a><br/>
                <a href="/ng/apidocs/sling8/index.html">Sling 8</a><br/>
                <a href="/ng/apidocs/sling7/index.html">Sling 7</a><br/>
                <a href="/ng/apidocs/sling6/index.html">Sling 6</a><br/>
                <a href="/ng/apidocs/sling5/index.html">Sling 5</a><br/>
                <a href="/ng/javadoc-io.html">Archive at javadoc.io</a><br/>
                
            </p><p>
                <strong>Project info</strong><br/>
                <a href="/ng/downloads.cgi">Downloads</a><br/>
                <a href="http://www.apache.org/licenses/">License</a><br/>
                <a href="/ng/contributing.html">Contributing</a><br/>
                <a href="/ng/news.html">News</a><br/>
                <a href="/ng/links.html">Links</a><br/>
                <a href="/ng/project-information.html">Project Information</a><br/>
                <a href="https://issues.apache.org/jira/browse/SLING">Issue Tracker</a><br/>
                <a href="/ng/project-information/security.html">Security</a><br/>
                
            </p><p>
                <strong>Source</strong><br/>
                <a href="http://svn.apache.org/viewvc/sling/trunk">Subversion</a><br/>
                <a href="git://git.apache.org/sling.git">Git</a><br/>
                <a href="https://github.com/apache/sling">Github Mirror</a><br/>
                
            </p><p>
                <strong>Sponsorship</strong><br/>
                <a href="http://www.apache.org/foundation/thanks.html">Thanks</a><br/>
                <a href="http://www.apache.org/foundation/sponsorship.html">Become a Sponsor</a><br/>
                <a href="https://donate.apache.org/">Donate!</a><br/>
                <a href="http://www.apache.org/foundation/buy_stuff.html">Buy Stuff</a><br/>
                
            </p><p>
                <strong><a href="/ng/sitemap.html">Site Map</a></strong>
            </p>
        </div>        <div class="main">
<div class="breadcrumbs"><a href="/ng/">Home</a>&nbsp;&raquo;&nbsp;<a href="/ng/documentation.html">Documentation</a>&nbsp;&raquo;&nbsp;<a href="/ng/documentation/bundles.html">Bundles</a>&nbsp;&raquo;&nbsp;<a href="/ng/documentation/bundles/sling-query.html">Sling Query</a>&nbsp;&raquo;&nbsp;</div>            <h1>
                Examples
            </h1><div class="row"><div class="small-12 columns"><section class="wrap"><p>Get containing page (like [PageManager#getContainingPage](https://docs.adobe.com/docs/en/aem/6-3/develop/ref/javadoc/com/day/cq/wcm/api/PageManager.html#getContainingPage(org.apache.sling.api.resource.Resource)))</p>
<pre><code>$(resource).closest(&quot;cq:Page&quot;)
</code></pre>
<p>Get first ancestor with a given template</p>
<pre><code>$(resource).closest(&quot;cq:Page[jcr:content/cq:template=/apps/geometrixx/templates/homepage]&quot;)
</code></pre>
<p>List siblings of the current page which can be displayed in the navigation</p>
<pre><code>$(resource).closest(&quot;cq:Page&quot;).siblings(&quot;cq:Page[jcr:content/hiddenInNav=false]&quot;)
</code></pre>
<p>Get the first sibling of the current page</p>
<pre><code>$(resource).closest(&quot;cq:Page&quot;).siblings(&quot;cq:Page&quot;).first()
</code></pre>
<p>Get page ancestor closest to the root</p>
<pre><code>$(resource).parents(&quot;cq:Page&quot;).last()
</code></pre>
<p>Get the second child of each resource:</p>
<pre><code>$(resource1, resource2, resource3).children(&quot;:eq(1)&quot;)
</code></pre>
<p>Get the first two children of each resource:</p>
<pre><code>$(resource1, resource2, resource3).children(&quot;:lt(2)&quot;)
</code></pre>
<p>Closest ancestor page having non-empty parsys</p>
<pre><code>$(resource).closest(&quot;cq:Page foundation/components/parsys:parent&quot;)
</code></pre>
<p>Get all parents of the current resource and adapt them to Page object</p>
<pre><code>Iterable&lt;Page&gt; breadcrumbs = $(resource).parents(&quot;cq:Page&quot;).map(Page.class);
</code></pre>
<p>Get all parents of the current resource up to the home page</p>
<pre><code>Iterable&lt;Page&gt; breadcrumbs;
breadcrumbs = $(resource).parentsUntil(
    &quot;cq:Page[jcr:content/cq:template=/apps/geometrixx/templates/homepage]&quot;,
    &quot;cq:Page&quot;).map(Page.class);
</code></pre>
<p>List all grand-children pages having empty parsys</p>
<pre><code>$(resource).children(&quot;cq:Page&quot;).children(&quot;cq:Page&quot;).has(&quot;foundation/components/parsys:empty)
</code></pre>
<p>Use JCR query to find all <code>cq:Page</code>s with a given template</p>
<pre><code>$(resourceResolver)
    .searchStrategy(SearchStrategy.QUERY)
    .find(&quot;cq:PageContent[cq:template=/apps/geometrixx/templates/homepage]&quot;)
    .parent()
</code></pre>
<p>Find children named <code>en</code> or <code>de</code></p>
<pre><code>$(resource).children(&quot;#en, #de&quot;)
</code></pre></section></div></div>
<div class="footer">
                <div class="trademarkFooter">
                    Apache Sling, Sling, Apache, the Apache feather logo, and the Apache Sling project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners.
                </div>
            </div>            
            
        </div>
    </body>
</html>
