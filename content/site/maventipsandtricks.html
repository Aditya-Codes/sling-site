
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<HTML>
  <HEAD>
    <TITLE>Apache Sling - MavenTipsAndTricks</TITLE>
    <LINK rel="stylesheet" href="http://sling.apache.org/site/media.data/site.css" type="text/css" media="all">
    <LINK rel="icon" href="http://sling.apache.org/site/media.data/favicon.ico">
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8">
  </HEAD>
  <BODY><div class="siteconversion">This is an old version of the Sling website, see the <a href="http://sling.apache.org/site-conversion.html">site conversion page</a> for more info. The migrated but not yet edited version of this page is at <a href='/documentation/development/maventipsandtricks.html'>/documentation/development/maventipsandtricks.html</a></div>
    <DIV class="title">
      <DIV class="logo">
        <A href="http://sling.apache.org/site/index.html">
          <IMG border="0" alt="Apache Sling" src="http://sling.apache.org/site/media.data/logo.png">
        </A>
      </DIV>
      <DIV class="header">
        <A href="http://www.apache.org/">
          <IMG border="0" alt="Apache" src="http://sling.apache.org/site/media.data/apache.png">
        </A>
      </DIV>
    </DIV>
    <DIV class="menu">
<P><B>Documentation</B><BR class="atl-forced-newline">
<A href="getting-started.html" title="Getting Started">Getting Started</A><BR class="atl-forced-newline">
<A href="the-sling-engine.html" title="The Sling Engine">The Sling Engine</A><BR class="atl-forced-newline">
<A href="development.html" title="Development">Development</A><BR class="atl-forced-newline">
<A href="bundles.html" title="Bundles">Bundles</A><BR class="atl-forced-newline">
<A href="tutorials-how-tos.html" title="Tutorials & How-Tos">Tutorials &amp; How&#45;Tos</A><BR class="atl-forced-newline">
<A href="configuration.html" title="Configuration">Configuration</A><BR class="atl-forced-newline">
<A href="http://sling.apache.org/apidocs/sling6/index.html" class="external-link" rel="nofollow">API docs</A><BR class="atl-forced-newline">
<A href="http://s.apache.org/sling.wiki" class="external-link" rel="nofollow">Wiki</A><BR class="atl-forced-newline">
<A href="http://s.apache.org/sling.faq" class="external-link" rel="nofollow">FAQ</A><BR class="atl-forced-newline"></P>

<P><B>Project info</B><BR class="atl-forced-newline">
<A href="http://sling.apache.org/site/downloads.cgi" class="external-link" rel="nofollow">Downloads</A><BR class="atl-forced-newline">
<A href="http://www.apache.org/licenses/" class="external-link" rel="nofollow">License</A><BR class="atl-forced-newline">
<A href="contributing.html" title="Contributing">Contributing</A><BR class="atl-forced-newline">
<A href="news.html" title="News">News</A><BR class="atl-forced-newline">
<A href="links.html" title="Links">Links</A><BR class="atl-forced-newline">
<A href="project-information.html" title="Project Information">Project Information</A><BR class="atl-forced-newline">
<A href="https://issues.apache.org/jira/browse/SLING" class="external-link" rel="nofollow">Issue Tracker</A><BR class="atl-forced-newline">
<A href="http://svn.apache.org/viewvc/sling/trunk" class="external-link" rel="nofollow">Browse Source Repository</A><BR class="atl-forced-newline">
<A href="security.html" title="Security">Security</A><BR class="atl-forced-newline"></P>

<P><B>Sponsorship</B><BR class="atl-forced-newline">
<A href="http://www.apache.org/foundation/thanks.html" class="external-link" rel="nofollow">Thanks</A><BR class="atl-forced-newline">
<A href="http://www.apache.org/foundation/sponsorship.html" class="external-link" rel="nofollow">Become a Sponsor</A><BR>
<A href="http://www.apache.org/foundation/buy_stuff.html" class="external-link" rel="nofollow">Buy Stuff</A></P>


  <IFRAME src="http://www.apache.org/ads/button.html" style="border-width:0; float: left" frameborder="0" scrolling="no" width="135" height="135"></IFRAME>
  <P style="height: 135px"></P>
    </DIV>
    <DIV class="main">
        <DIV class="breadcrump" style="font-size: 80%;">
<A href="apache-sling.html" title="Apache Sling Website">Apache Sling Website</A>&nbsp;&gt;&nbsp;<A href="apache-sling.html" title="Apache Sling">Apache Sling</A>&nbsp;&gt;&nbsp;<A href="documentation.html" title="Documentation">Documentation</A>&nbsp;&gt;&nbsp;<A href="development.html" title="Development">Development</A>&nbsp;&gt;&nbsp;<A href="" title="MavenTipsAndTricks">MavenTipsAndTricks</A>
        </DIV>
<P>Here's our collection of tips and tricks for building Sling with <A href="http://maven.apache.org/" class="external-link" rel="nofollow">Maven</A>.</P>

<H1><A name="MavenTipsAndTricks-Mavenlocalrepository"></A>Maven local repository</H1>

<P>The first time you run a Maven build, or when Maven needs additional build components, it downloads plugins and dependencies under its <EM>local repository</EM> folder on your computer. By default, this folder is named <EM>.m2/repository</EM> in your home directory.</P>

<P>Maven uses this repository as a cache for artifacts that it might need for future builds, which means that the first Sling build usually takes much longer than usual, as Maven needs to download many tools and dependencies into its local repository while the build progresses.</P>

<P>The build might fail if one of those downloads fails, in that case it might be worth retrying the build, to check if that was just a temporary connection problem, or if there's a more serious error.</P>

<P>In some cases, the local Maven repository might get corrupted - if your build fails on a computer and works on another one, clearing the local repository before restarting the build might be worth trying.</P>

<H1><A name="MavenTipsAndTricks-Mavensettings"></A>Maven settings</H1>

<H2><A name="MavenTipsAndTricks-Ignoreyourlocalsettings"></A>Ignore your local settings</H2>
<P>To make sure you're getting the same results as we are when building Sling, it is recommend to ignore any local settings.</P>

<P>On unixish platforms, using</P>

<DIV class="preformatted panel" style="border-width: 1px;"><DIV class="preformattedContent panelContent">
<PRE>mvn -s /dev/null ...
</PRE>
</DIV></DIV>

<P>does the trick.</P>

<DIV class="panelMacro"><TABLE class="noteMacro"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="https://cwiki.apache.org/confluence/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD>Does anyone have a similar command-line option that works under Windows?</TD></TR></TABLE></DIV>

<H1><A name="MavenTipsAndTricks-"></A></H1>
<H1><A name="MavenTipsAndTricks-MAVENOPTS"></A>MAVEN_OPTS</H1>
<P>The MAVEN_OPTS environment variable defines options for the JVM that executes Maven.</P>

<P>Set it according to your platform, i.e. <TT>export MAVEN_OPTS=...</TT> on unixish systems or <TT>set MAVEN_OPTS=...</TT> on Windows.</P>

<H2><A name="MavenTipsAndTricks-IncreaseJVMmemoryifneeded"></A>Increase JVM memory if needed</H2>
<P>If getting an OutOfMemoryException when running mvn, try setting</P>

<DIV class="preformatted panel" style="border-width: 1px;"><DIV class="preformattedContent panelContent">
<PRE>MAVEN_OPTS=&quot;-Xmx256M -XX:MaxPermSize=256m&quot;
</PRE>
</DIV></DIV>

<P>to allocate 256MB of RAM to Maven.</P>

<H2><A name="MavenTipsAndTricks-DebuggingcodelaunchedbyMaven"></A>Debugging code launched by Maven</H2>
<P>To run the Sling launchpad webapp in debug mode from Maven, for example, use something like</P>

<DIV class="preformatted panel" style="border-width: 1px;"><DIV class="preformattedContent panelContent">
<PRE>MAVEN_OPTS=&quot;-agentlib:jdwp=transport=dt_socket,address=30303,server=y,suspend=n&quot;
</PRE>
</DIV></DIV>

<P>And then connect to port 30303 with a remote JVM debugger (most IDEs do this).</P>

<H2><A name="MavenTipsAndTricks-AvoidspacesinMavenrepositoryandworkspacepaths"></A>Avoid spaces in Maven repository and workspace paths</H2>
<P>Some Maven plugins do not like spaces in paths. It is better to avoid putting your Maven repository, or your code, under paths like <EM>Documents and Settings</EM>, for example.</P>
        <DIV class="timestamp" style="margin-top: 30px; font-size: 80%; text-align: right;">
Last modified by fmeschbe on 2011-06-02 09:54:47.0
        </DIV>
        <DIV class="trademarkFooter">
Apache Sling, Sling, Apache, the Apache feather logo, and the Apache Sling project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners.
        </DIV>
    </DIV>
  </BODY>
</HTML>

