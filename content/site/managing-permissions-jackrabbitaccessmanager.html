
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<HTML>
  <HEAD>
    <TITLE>Apache Sling - Managing permissions (jackrabbit.accessmanager)</TITLE>
    <LINK rel="stylesheet" href="http://sling.apache.org/site/media.data/site.css" type="text/css" media="all">
    <LINK rel="icon" href="http://sling.apache.org/site/media.data/favicon.ico">
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8">
  </HEAD>
  <BODY><div class="siteconversion">This is an old version of the Sling website, see the <a href="http://sling.apache.org/site-conversion.html">site conversion page</a> for more info.</div>
    <DIV class="title">
      <DIV class="logo">
        <A href="http://sling.apache.org/site/index.html">
          <IMG border="0" alt="Apache Sling" src="http://sling.apache.org/site/media.data/logo.png">
        </A>
      </DIV>
      <DIV class="header">
        <A href="http://www.apache.org/">
          <IMG border="0" alt="Apache" src="http://sling.apache.org/site/media.data/apache.png">
        </A>
      </DIV>
    </DIV>
    <DIV class="menu">
<P><B>Documentation</B><BR class="atl-forced-newline">
<A href="getting-started.html" title="Getting Started">Getting Started</A><BR class="atl-forced-newline">
<A href="the-sling-engine.html" title="The Sling Engine">The Sling Engine</A><BR class="atl-forced-newline">
<A href="development.html" title="Development">Development</A><BR class="atl-forced-newline">
<A href="bundles.html" title="Bundles">Bundles</A><BR class="atl-forced-newline">
<A href="tutorials-how-tos.html" title="Tutorials & How-Tos">Tutorials &amp; How&#45;Tos</A><BR class="atl-forced-newline">
<A href="configuration.html" title="Configuration">Configuration</A><BR class="atl-forced-newline">
<A href="http://sling.apache.org/apidocs/sling6/index.html" class="external-link" rel="nofollow">API docs</A><BR class="atl-forced-newline">
<A href="http://s.apache.org/sling.wiki" class="external-link" rel="nofollow">Wiki</A><BR class="atl-forced-newline">
<A href="http://s.apache.org/sling.faq" class="external-link" rel="nofollow">FAQ</A><BR class="atl-forced-newline"></P>

<P><B>Project info</B><BR class="atl-forced-newline">
<A href="http://sling.apache.org/site/downloads.cgi" class="external-link" rel="nofollow">Downloads</A><BR class="atl-forced-newline">
<A href="http://www.apache.org/licenses/" class="external-link" rel="nofollow">License</A><BR class="atl-forced-newline">
<A href="contributing.html" title="Contributing">Contributing</A><BR class="atl-forced-newline">
<A href="news.html" title="News">News</A><BR class="atl-forced-newline">
<A href="links.html" title="Links">Links</A><BR class="atl-forced-newline">
<A href="project-information.html" title="Project Information">Project Information</A><BR class="atl-forced-newline">
<A href="https://issues.apache.org/jira/browse/SLING" class="external-link" rel="nofollow">Issue Tracker</A><BR class="atl-forced-newline">
<A href="http://svn.apache.org/viewvc/sling/trunk" class="external-link" rel="nofollow">Browse Source Repository</A><BR class="atl-forced-newline">
<A href="security.html" title="Security">Security</A><BR class="atl-forced-newline"></P>

<P><B>Sponsorship</B><BR class="atl-forced-newline">
<A href="http://www.apache.org/foundation/thanks.html" class="external-link" rel="nofollow">Thanks</A><BR class="atl-forced-newline">
<A href="http://www.apache.org/foundation/sponsorship.html" class="external-link" rel="nofollow">Become a Sponsor</A><BR>
<A href="http://www.apache.org/foundation/buy_stuff.html" class="external-link" rel="nofollow">Buy Stuff</A></P>


  <IFRAME src="http://www.apache.org/ads/button.html" style="border-width:0; float: left" frameborder="0" scrolling="no" width="135" height="135"></IFRAME>
  <P style="height: 135px"></P>
    </DIV>
    <DIV class="main">
        <DIV class="breadcrump" style="font-size: 80%;">
<A href="apache-sling.html" title="Apache Sling Website">Apache Sling Website</A>&nbsp;&gt;&nbsp;<A href="apache-sling.html" title="Apache Sling">Apache Sling</A>&nbsp;&gt;&nbsp;<A href="documentation.html" title="Documentation">Documentation</A>&nbsp;&gt;&nbsp;<A href="bundles.html" title="Bundles">Bundles</A>&nbsp;&gt;&nbsp;<A href="" title="Managing permissions (jackrabbit.accessmanager)">Managing permissions (jackrabbit.accessmanager)</A>
        </DIV>
<H1><A name="Managingpermissions%28jackrabbit.accessmanager%29-Managingpermissions"></A>Managing permissions</H1>


<P>The <TT>jackrabbit-accessmanager</TT> bundle delivers a REST interface to manipulate users permissions in the JCR. After installing the <TT>jackrabbit-accessmanager</TT> bundle the REST services are exposed under the path of the node where you will manipulate the permissions for a user with a specific selector like <TT>modifyAce</TT>, <TT>acl</TT> and <TT>deleteAce</TT>.</P>
<DIV>
<UL>
    <LI><A href="#Managingpermissions%2528jackrabbit.accessmanager%2529-Privileges">Privileges</A></LI>
    <LI><A href="#Managingpermissions%2528jackrabbit.accessmanager%2529-Addormodifypermissions">Add or modify permissions</A></LI>
    <LI><A href="#Managingpermissions%2528jackrabbit.accessmanager%2529-Deletepermissions">Delete permissions</A></LI>
    <LI><A href="#Managingpermissions%2528jackrabbit.accessmanager%2529-Getpermissions">Get permissions</A></LI>
<UL>
    <LI><A href="#Managingpermissions%2528jackrabbit.accessmanager%2529-BoundPermissions">Bound Permissions</A></LI>
    <LI><A href="#Managingpermissions%2528jackrabbit.accessmanager%2529-EffectivePermissions">Effective Permissions</A></LI>
</UL>
    <LI><A href="#Managingpermissions%2528jackrabbit.accessmanager%2529-SampleUserInterfaceImplementation">Sample User Interface Implementation</A></LI>
</UL></DIV>

<H2><A name="Managingpermissions%28jackrabbit.accessmanager%29-Privileges"></A>Privileges</H2>

<DIV class="table-wrap">
<TABLE class="confluenceTable"><TBODY>
<TR>
<TH class="confluenceTh"> privilagename </TH>
<TH class="confluenceTh"> description </TH>
</TR>
<TR>
<TD class="confluenceTd"> jcr:read </TD>
<TD class="confluenceTd"> the privilege to retrieve a node and get its properties and their values </TD>
</TR>
<TR>
<TD class="confluenceTd"> jcr:readAccessControl </TD>
<TD class="confluenceTd"> the privilege to get the access control policy of a node </TD>
</TR>
<TR>
<TD class="confluenceTd"> jcr:modifyProperties </TD>
<TD class="confluenceTd"> the privilege to create, modify and remove the properties of a node </TD>
</TR>
<TR>
<TD class="confluenceTd"> jcr:addChildNodes </TD>
<TD class="confluenceTd"> the privilege to create child nodes of a node </TD>
</TR>
<TR>
<TD class="confluenceTd"> jcr:removeChildNodes </TD>
<TD class="confluenceTd"> the privilege to remove child nodes of a node </TD>
</TR>
<TR>
<TD class="confluenceTd"> jcr:removeNode </TD>
<TD class="confluenceTd"> the privilege to remove a node </TD>
</TR>
<TR>
<TD class="confluenceTd"> jcr:write </TD>
<TD class="confluenceTd"> an aggregate privilege that contains: jcr:modifyProperties  jcr:addChildNodes  jcr:removeNode  jcr:removeChildNodes </TD>
</TR>
<TR>
<TD class="confluenceTd"> jcr:modifyAccessControl </TD>
<TD class="confluenceTd"> the privilege to modify the access control policies of a node </TD>
</TR>
<TR>
<TD class="confluenceTd"> jcr:lockManagement </TD>
<TD class="confluenceTd"> the privilege to lock and unlock a node </TD>
</TR>
<TR>
<TD class="confluenceTd"> jcr:versionManagement </TD>
<TD class="confluenceTd"> the privilege to perform versioning operations on a node </TD>
</TR>
<TR>
<TD class="confluenceTd"> jcr:nodeTypeManagement </TD>
<TD class="confluenceTd"> the privilege to add and remove mixin node types and change the primary node type of a node </TD>
</TR>
<TR>
<TD class="confluenceTd"> jcr:retentionManagement </TD>
<TD class="confluenceTd"> the privilege to perform retention management operations on a node </TD>
</TR>
<TR>
<TD class="confluenceTd"> jcr:lifecycleManagement </TD>
<TD class="confluenceTd"> the privilege to perform lifecycle operations on a node </TD>
</TR>
<TR>
<TD class="confluenceTd"> jcr:all </TD>
<TD class="confluenceTd"> an aggregate privilege that contains all predefined privileges </TD>
</TR>
</TBODY></TABLE>
</DIV>


<H2><A name="Managingpermissions%28jackrabbit.accessmanager%29-Addormodifypermissions"></A>Add or modify permissions</H2>

<P>To modify the permissions for a node POST a request to <TT>/&lt;path-to-the-node&gt;.modifyAce.&lt;html or json&gt;</TT>. The following parameters are available:</P>
<DIV class="table-wrap">
<TABLE class="confluenceTable"><TBODY>
<TR>
<TH class="confluenceTh"> parameter name <BR class="atl-forced-newline"> </TH>
<TH class="confluenceTh"> required <BR class="atl-forced-newline"> </TH>
<TH class="confluenceTh"> description <BR class="atl-forced-newline"> </TH>
</TR>
<TR>
<TD class="confluenceTd"> principalId <BR class="atl-forced-newline"> </TD>
<TD class="confluenceTd"> yes <BR class="atl-forced-newline"> </TD>
<TD class="confluenceTd"> The name of the user or the group to assign the privileges to<BR class="atl-forced-newline"> </TD>
</TR>
<TR>
<TD class="confluenceTd"> privilege@&lt;privilege-name&gt;<BR class="atl-forced-newline"> </TD>
<TD class="confluenceTd"> yes <BR class="atl-forced-newline"> </TD>
<TD class="confluenceTd"> The privilege which should be updated. See table above for possible &lt;privilege-name&gt; values.  The request may contain several of these parameters to update multiple privileges in a single request.  The parameter value should be one of the following: <BR class="atl-forced-newline">
<UL>
	<LI><EM>granted</EM> - Set the privlege as granted to the user or group. <BR class="atl-forced-newline"></LI>
	<LI><EM>denied</EM> - Set the privilege as denied to the user or group. <BR class="atl-forced-newline"></LI>
	<LI><EM>none</EM> - Unset a privilege that was previously set as granted or denied. <BR class="atl-forced-newline"></LI>
</UL>
</TD>
</TR>
<TR>
<TD class="confluenceTd"> order </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> The position where the access control entry should go in the list.  The parameter value should be one of the following: <BR class="atl-forced-newline">
<UL>
	<LI><EM>first</EM> - Place the target ACE as the first amongst its siblings. <BR class="atl-forced-newline"></LI>
	<LI><EM>last</EM> - Place the target ACE as the last amongst its siblings. <BR class="atl-forced-newline"></LI>
	<LI><EM>before xyz</EM> - Place the target ACE immediately before the sibling whose principalId is xyz. <BR class="atl-forced-newline"></LI>
	<LI><EM>after xyz</EM> - Place the target ACE immediately after the sibling whose principalId is xyz. <BR class="atl-forced-newline"></LI>
	<LI><EM>numeric</EM> - Place the target ACE at the specified numeric index.</LI>
</UL>
</TD>
</TR>
</TBODY></TABLE>
</DIV>



<P>Responses:</P>
<DIV class="table-wrap">
<TABLE class="confluenceTable"><TBODY>
<TR>
<TD class="confluenceTd"> 200 </TD>
<TD class="confluenceTd"> Success </TD>
</TR>
<TR>
<TD class="confluenceTd"> 500  </TD>
<TD class="confluenceTd"> Failure, HTML (or JSON) explains failure. </TD>
</TR>
</TBODY></TABLE>
</DIV>

<P>Example with curl:</P>
<DIV class="preformatted panel" style="border-width: 1px;"><DIV class="preformattedContent panelContent">
<PRE>curl -FprincipalId=myuser -Fprivilege@jcr:read=granted http://localhost:8080/test/node.modifyAce.html
</PRE>
</DIV></DIV>


<H2><A name="Managingpermissions%28jackrabbit.accessmanager%29-Deletepermissions"></A>Delete permissions</H2>

<P>To delete permissions for a node POST a request to <TT>/&lt;path-to-the-node&gt;.deleteAce.&lt;html or json&gt;</TT>. The following parameters are available:</P>
<DIV class="table-wrap">
<TABLE class="confluenceTable"><TBODY>
<TR>
<TH class="confluenceTh"> parameter name <BR class="atl-forced-newline"> </TH>
<TH class="confluenceTh"> required <BR class="atl-forced-newline"> </TH>
<TH class="confluenceTh"> description <BR class="atl-forced-newline"> </TH>
</TR>
<TR>
<TD class="confluenceTd"> :applyTo<BR class="atl-forced-newline"> </TD>
<TD class="confluenceTd"> yes <BR class="atl-forced-newline"> </TD>
<TD class="confluenceTd"> An array with the name of the users and/or the name of the groups to remove the privileges. <BR class="atl-forced-newline"> </TD>
</TR>
</TBODY></TABLE>
</DIV>


<P>Responses:</P>
<DIV class="table-wrap">
<TABLE class="confluenceTable"><TBODY>
<TR>
<TD class="confluenceTd"> 200 </TD>
<TD class="confluenceTd"> Success </TD>
</TR>
<TR>
<TD class="confluenceTd"> 500  </TD>
<TD class="confluenceTd"> Failure, HTML (or JSON) explains failure. </TD>
</TR>
</TBODY></TABLE>
</DIV>

<P>Example with curl:</P>
<DIV class="preformatted panel" style="border-width: 1px;"><DIV class="preformattedContent panelContent">
<PRE>curl -F:applyTo=myuser http://localhost:8080/test/node.deleteAce.html
</PRE>
</DIV></DIV>

<H2><A name="Managingpermissions%28jackrabbit.accessmanager%29-Getpermissions"></A>Get permissions</H2>

<H3><A name="Managingpermissions%28jackrabbit.accessmanager%29-BoundPermissions"></A>Bound Permissions</H3>

<P>To get the permissions bound to a particular node in a json format for a node send a GET request to <TT>/&lt;path-to-the-node&gt;.acl.json</TT>. </P>

<P>Example:</P>
<DIV class="preformatted panel" style="border-width: 1px;"><DIV class="preformattedContent panelContent">
<PRE>http://localhost:8080/test/node.acl.json
</PRE>
</DIV></DIV>

<H3><A name="Managingpermissions%28jackrabbit.accessmanager%29-EffectivePermissions"></A>Effective Permissions</H3>

<P>To get the permissions which are effective for a particular node in a json format for a node send a GET request to <TT>/&lt;path-to-the-node&gt;.eacl.json</TT>. </P>

<P>Example:</P>
<DIV class="preformatted panel" style="border-width: 1px;"><DIV class="preformattedContent panelContent">
<PRE>http://localhost:8080/test/node.eacl.json
</PRE>
</DIV></DIV>

<DIV class="panelMacro"><TABLE class="noteMacro"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="https://cwiki.apache.org/confluence/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD>See section 16.3 of the JCR 2.0 specification for an explanation of the difference between bound and effective policies.</TD></TR></TABLE></DIV>


<H2><A name="Managingpermissions%28jackrabbit.accessmanager%29-SampleUserInterfaceImplementation"></A>Sample User Interface Implementation</H2>

<P><EM>Since Version 2.1.1</EM></P>

<P>A sample implementation of ui pages for permissions management is provided @ <A href="http://svn.apache.org/viewvc/sling/trunk/samples/accessmanager-ui/" class="external-link" rel="nofollow">http://svn.apache.org/viewvc/sling/trunk/samples/accessmanager-ui/</A></P>
        <DIV class="timestamp" style="margin-top: 30px; font-size: 80%; text-align: right;">
Last modified by edn on 2011-05-05 23:30:30.0
        </DIV>
        <DIV class="trademarkFooter">
Apache Sling, Sling, Apache, the Apache feather logo, and the Apache Sling project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners.
        </DIV>
    </DIV>
  </BODY>
</HTML>

